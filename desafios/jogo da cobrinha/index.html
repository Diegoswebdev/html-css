<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
        canvas {
            border: 1px solid black;
            border-radius: 10px;
            background-color: #862d2d;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        body {
            background: rgb(0,36,9);
            background: linear-gradient(90deg, rgba(0,36,9,1) 0%, rgba(194,119,119,1) 100%, rgba(0,212,255,1) 100%);
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="400" height="400"></canvas>

    <script>
        // Configurações do jogo
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const blockSize = 20;
        let snake = [{x: 10, y: 10}];
        let food = {x: 15, y: 15};
        let dx = 0;
        let dy = 0;
        let score = 0;

        // Função para desenhar um bloco
        function drawBlock(x, y) {
            ctx.fillRect(x * blockSize, y * blockSize, blockSize, blockSize);
        }

        // Função principal do jogo
        function main() {
            clearCanvas();
            moveSnake();
            drawSnake();
            drawFood();
            checkCollision();
            drawScore();

            if (!isGameOver()) {
                setTimeout(main, 100);
            } else {
                alert("Game Over! Pontuação: " + score);
                resetGame();
            }
        }

        // Função para limpar o canvas
        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        // Função para movimentar a cobra
        function moveSnake() {
            const head = {x: snake[0].x + dx, y: snake[0].y + dy};
            snake.unshift(head);
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                generateFood();
            } else {
                snake.pop();
            }
        }

        // Função para desenhar a cobra
        function drawSnake() {
            ctx.fillStyle = "#000";
            snake.forEach(block => drawBlock(block.x, block.y));
        }

        // Função para desenhar a comida
        function drawFood() {
            ctx.fillStyle = "#f00";
            drawBlock(food.x, food.y);
        }

        // Função para gerar nova posição para a comida
        function generateFood() {
            food = {
                x: Math.floor(Math.random() * (canvas.width / blockSize)),
                y: Math.floor(Math.random() * (canvas.height / blockSize))
            };
            // Verifica se a nova posição da comida está ocupada pela cobra
            if (snake.some(block => block.x === food.x && block.y === food.y)) {
                generateFood();
            }
        }

        // Função para verificar colisão
        function checkCollision() {
            const head = snake[0];
            if (head.x < 0 || head.x >= canvas.width / blockSize ||
                head.y < 0 || head.y >= canvas.height / blockSize ||
                snake.slice(1).some(block => block.x === head.x && block.y === head.y)) {
                return true;
            }
            return false;
        }

        // Função para verificar se o jogo acabou
        function isGameOver() {
            return checkCollision();
        }

        // Função para desenhar a pontuação
        function drawScore() {
                ctx.fillStyle = "#fff";
                ctx.font = "20px Arial";
                ctx.fillText("Score: " + score, 10, 30);
            }

        // Função para reiniciar o jogo
        function resetGame() {
            snake = [{x: 10, y: 10}];
            food = {x: 15, y: 15};
            dx = 0;
            dy = 0;
            score = 0;
            main();
        }

        // Event listener para capturar as teclas de direção
        document.addEventListener("keydown", event => {
            switch (event.key) {
                case "ArrowUp":
                    if (dy !== 1) {
                        dx = 0;
                        dy = -1;
                    }
                    break;
                case "ArrowDown":
                    if (dy !== -1) {
                        dx = 0;
                        dy = 1;
                    }
                    break;
                case "ArrowLeft":
                    if (dx !== 1) {
                        dx = -1;
                        dy = 0;
                    }
                    break;
                case "ArrowRight":
                    if (dx !== -1) {
                        dx = 1;
                        dy = 0;
                    }
                    break;
            }
        });

        // Iniciar o jogo
        main();
    </script>
</body>
</html>
